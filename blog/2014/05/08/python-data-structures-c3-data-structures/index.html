<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <title>
       Python Data Structures - C3 Data Structures &middot;  Hujiawei Bujidao
    </title>

    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta property="og:title" content=" Python Data Structures - C3 Data Structures &middot;  Hujiawei Bujidao" />
  	<meta property="og:site_name" content="Hujiawei Bujidao" />
  	<meta property="og:url" content="https://hujiaweibujidao.github.io/blog/2014/05/08/python-data-structures-c3-data-structures/" />

    
  	<meta property="og:type" content="article" />
    <meta property="og:article:published_time" content="2014-05-08T00:00:00Z" />
    
    <meta property="og:article:tag" content="algorithm" />
    
    <meta property="og:article:tag" content="python" />
    
    

    <meta name="description" content="Happy Coding &amp; Enjoy Living" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://hujiaweibujidao.github.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://hujiaweibujidao.github.io/images/apple-touch-icon.png" />
    <link rel="stylesheet" type="text/css" href="https://hujiaweibujidao.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://hujiaweibujidao.github.io/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="https://hujiaweibujidao.github.io/css/hugo.css" />

    
    <link rel="stylesheet" type="text/css" href="https://hujiaweibujidao.github.io/css/highlight.css">
    
    <link rel="stylesheet" type="text/css" href="https://hujiaweibujidao.github.io/css/github-gist.css">
    
    <script src="https://hujiaweibujidao.github.io/js/highlight.js"></script>
    <script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    
    

    

    <link rel="canonical" href="https://hujiaweibujidao.github.io/blog/2014/05/08/python-data-structures-c3-data-structures/" />

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        

        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://hujiaweibujidao.github.io/">首页</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://hujiaweibujidao.github.io/about">关于</a>
            </li>
        

        <li class="nav-opened" role="presentation"><a href=""></a></li>
        <li class="nav-opened" role="presentation"><a href="https://hujiaweibujidao.github.io/tags/android/">Android</a></li>
        <li class="nav-opened" role="presentation"><a href="https://hujiaweibujidao.github.io/tags/python/">Python</a></li>
        <li class="nav-opened" role="presentation"><a href="https://hujiaweibujidao.github.io/tags/algorithm/">算法</a></li>
        
        <li class="nav-opened" role="presentation"><a href="https://hujiaweibujidao.github.io/tags/dev/">开发</a></li>
        <li class="nav-opened" role="presentation"><a href="https://hujiaweibujidao.github.io/tags/life/">生活</a></li>
    </ul>

    
    

    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




  <header class="main-header post-head" style="background-image: url(https://www.bing.com/ImageResolution.aspx?w=1366&amp;h=768)">
  

    <nav class="main-nav overlay clearfix">
    
        
    
    
        <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">菜单</span></a>
    
</nav>

    <div class="vertical">
        <div class="main-header-content inner">
            <h1 class="page-title">Python Data Structures - C3 Data Structures</h1>
            <h2 class="page-description">Hujiawei Bujidao</h2> <br/>
            
    <a class="bloglogo" href="https://github.com/hujiaweibujidao" target="_blank">
    <span class="icon-github" style="color:white;font-size:2em"></span>
    </a>
&nbsp;


    <a class="bloglogo" href="https://weibo.com/hujiaweiyinger" target="_blank">
        <span class="icon-twitter" style="color:white;font-size:2em"></span>
    </a>
&nbsp;




    <a class="bloglogo" href="https://www.linkedin.com/in/hujiaweibujidao" target="_blank">
        <span class="icon-linkedin" style="color:white;font-size:2em"></span>
    </a>
&nbsp;


        </div>
    </div>
</header>



<main class="content" role="main">
  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Python Data Structures - C3 Data Structures</h1>
        

        <section class="post-meta">
        
          <span class="post-tag small"><a href="https://hujiaweibujidao.github.io/tags/algorithm/">#algorithm</a></span>
        
          <span class="post-tag small"><a href="https://hujiaweibujidao.github.io/tags/python/">#python</a></span>
        
        &nbsp;&nbsp;
        
          <time class="post-date" datetime="2014-05-08T00:00:00Z">
            2014/5/8
          </time>
        
        </section>
        <br/>
    </header>

    <section class="post-content">
      <p>Python数据结构篇(3) 数据结构</p>
<p>参考内容：<br>
1.<a href="http://interactivepython.org/courselib/static/pythonds/index.html">Problem Solving with Python</a><br>
Chapter 2 Algorithm Analysis <br>
Chapter 3 Basic Data Structures  <br>
Chapter 6 Trees and Tree Algorithms    <br>
2.<a href="http://en.wikipedia.org/wiki/Introduction_to_Algorithms">算法导论</a></p>
<h4 id="数据结构总结">数据结构总结</h4>
<p>1.Python内置数据结构的性能分析</p>
<p>(1)List<br>
List的各个操作的时间复杂度</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/listoptime.png" alt="image"></p>
<p>同样是执行1000次创建一个包含1-1000的列表，四种方式使用的时间差距很大！使用append比逐次增加要快很多，另外，使用python的列表产生式比append要快，而第四种方式更加快！</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test1</span>():
   l <span style="color:#f92672">=</span> []
   <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1000</span>):
      l <span style="color:#f92672">=</span> l <span style="color:#f92672">+</span> [i]
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test2</span>():
   l <span style="color:#f92672">=</span> []
   <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1000</span>):
      l<span style="color:#f92672">.</span>append(i)
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test3</span>():
   l <span style="color:#f92672">=</span> [i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1000</span>)]
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test4</span>():
   l <span style="color:#f92672">=</span> list(range(<span style="color:#ae81ff">1000</span>))

<span style="color:#75715e"># Import the timeit module -&gt; import timeit</span>
<span style="color:#75715e"># Import the Timer class defined in the module</span>
<span style="color:#f92672">from</span> timeit <span style="color:#f92672">import</span> Timer
<span style="color:#75715e"># If the above line is excluded, you need to replace Timer with</span>
<span style="color:#75715e"># timeit.Timer when defining a Timer object</span>
t1 <span style="color:#f92672">=</span> Timer(<span style="color:#e6db74">&#34;test1()&#34;</span>, <span style="color:#e6db74">&#34;from __main__ import test1&#34;</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;concat &#34;</span>,t1<span style="color:#f92672">.</span>timeit(number<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>), <span style="color:#e6db74">&#34;milliseconds&#34;</span>)
t2 <span style="color:#f92672">=</span> Timer(<span style="color:#e6db74">&#34;test2()&#34;</span>, <span style="color:#e6db74">&#34;from __main__ import test2&#34;</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;append &#34;</span>,t2<span style="color:#f92672">.</span>timeit(number<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>), <span style="color:#e6db74">&#34;milliseconds&#34;</span>)
t3 <span style="color:#f92672">=</span> Timer(<span style="color:#e6db74">&#34;test3()&#34;</span>, <span style="color:#e6db74">&#34;from __main__ import test3&#34;</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;comprehension &#34;</span>,t3<span style="color:#f92672">.</span>timeit(number<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>), <span style="color:#e6db74">&#34;milliseconds&#34;</span>)
t4 <span style="color:#f92672">=</span> Timer(<span style="color:#e6db74">&#34;test4()&#34;</span>, <span style="color:#e6db74">&#34;from __main__ import test4&#34;</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;list range &#34;</span>,t4<span style="color:#f92672">.</span>timeit(number<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>), <span style="color:#e6db74">&#34;milliseconds&#34;</span>)

<span style="color:#75715e"># (&#39;concat &#39;, 1.7890608310699463, &#39;milliseconds&#39;)</span>
<span style="color:#75715e"># (&#39;append &#39;, 0.13796091079711914, &#39;milliseconds&#39;)</span>
<span style="color:#75715e"># (&#39;comprehension &#39;, 0.05671119689941406, &#39;milliseconds&#39;)</span>
<span style="color:#75715e"># (&#39;list range &#39;, 0.014147043228149414, &#39;milliseconds&#39;)</span>
</code></pre></div><p>测试pop操作：从结果可以看出，pop最后一个元素的效率远远高于pop第一个元素</p>
<pre><code>x = list(range(2000000))
pop_zero = Timer(&quot;x.pop(0)&quot;,&quot;from __main__ import x&quot;)
print(&quot;pop_zero &quot;,pop_zero.timeit(number=1000), &quot;milliseconds&quot;)
x = list(range(2000000))
pop_end = Timer(&quot;x.pop()&quot;,&quot;from __main__ import x&quot;)
print(&quot;pop_end &quot;,pop_end.timeit(number=1000), &quot;milliseconds&quot;)

# ('pop_zero ', 1.9101738929748535, 'milliseconds')
# ('pop_end ', 0.00023603439331054688, 'milliseconds')
</code></pre><p>还有一个有意思的对比是list的<code>append(value)</code>和<code>insert(0, value)</code>，即一个从后面插入(后插)，另一个从前面插入(前插)，前者的效率远远高于后者。</p>
<p><strong>Python的list的实现不是类似数据结构中的单链表，而是类似数组，也就是说list中的元素保存在一片连续的内存区域中，这样的话只有知道元素索引就能确定元素的内存位置，从而直接取出该位置上的值，但是它的缺点在于前插需要移动元素，而且随着list中元素的增多需要移动的元素也就越多，花费的时间也就自然多了。而单链表不同，单链表要得到某个位置上的元素必须要从头开始遍历，但是它的插入操作(前插或者后插)基本上都是恒定的时间，与链表中元素的多少没有关系，因为元素之间用“指针”维护着他们的关系。</strong></p>
<p><strong>个人认为，Python的list其实是动态表，类似C++中的<code>vector</code>等或者Java中的<code>ArrayList</code>等，在算法导论的平摊分析章节的最后，详细讲解了动态表的扩张和收缩，根据装载因子的取值大小，当它高于某个固定值(例如$\frac{1}{2}$)时扩张表，当它低于某个固定值(例如$\frac{1}{4}$)时收缩表，这样就能保证表的利用率达到一个满意的程度(例如50%以上的位置都是有元素的)，感兴趣可以阅读原书。</strong></p>
<p>(2)Dictionary</p>
<p>Dictionary的各个操作的性能</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/dictionary.png" alt="image"></p>
<p>Dictionary和List的性能比较：list基本上随着其元素的数目呈线性增长，而dictionary一直维持在很短很短的时间内(我的机子测试的结果都是<code>0.001ms</code>)。Dictionary类似Java中的<code>HashMap</code>，内部实现使用了前面提到的hash函数，所以查找和删除都是常数时间的。</p>
<pre><code>import timeit
import random

for i in range(10000,1000001,20000):
    t = timeit.Timer(&quot;random.randrange(%d) in x&quot;%i,&quot;from __main__ import random,x&quot;)
    x = list(range(i))
    lst_time = t.timeit(number=1000)
    x = {j:None for j in range(i)}
    d_time = t.timeit(number=1000)
    print(&quot;%d,%10.3f,%10.3f&quot; % (i, lst_time, d_time))
</code></pre><p>结果图</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/compare.png" alt="image"></p>
<p>2.栈：LIFO结构，后进先出</p>
<p>栈能解决的问题很多，比如逆波兰表达式求值，求一个十进制数的二进制表达，检查括号匹配问题以及图的深度搜索等等，都很简单，可查看参考内容1学习。</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/stack.png" alt="image"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Completed implementation of a stack ADT</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Stack</span>:
    <span style="color:#66d9ef">def</span> __init__(self):
       self<span style="color:#f92672">.</span>items <span style="color:#f92672">=</span> []
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">is_empty</span>(self):
       <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>items <span style="color:#f92672">==</span> []
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">push</span>(self, item):
       self<span style="color:#f92672">.</span>items<span style="color:#f92672">.</span>append(item)
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">pop</span>(self):
       <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>items<span style="color:#f92672">.</span>pop()
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">peek</span>(self):
       <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>items[len(self<span style="color:#f92672">.</span>items)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">size</span>(self):
       <span style="color:#66d9ef">return</span> len(self<span style="color:#f92672">.</span>items)

s <span style="color:#f92672">=</span> Stack()
<span style="color:#66d9ef">print</span>(s<span style="color:#f92672">.</span>is_empty())
s<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">4</span>)
s<span style="color:#f92672">.</span>push(<span style="color:#e6db74">&#39;dog&#39;</span>)
<span style="color:#66d9ef">print</span>(s<span style="color:#f92672">.</span>peek())
s<span style="color:#f92672">.</span>push(True)
<span style="color:#66d9ef">print</span>(s<span style="color:#f92672">.</span>size())
<span style="color:#66d9ef">print</span>(s<span style="color:#f92672">.</span>is_empty())
s<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">8.4</span>)
<span style="color:#66d9ef">print</span>(s<span style="color:#f92672">.</span>pop())
<span style="color:#66d9ef">print</span>(s<span style="color:#f92672">.</span>pop())
<span style="color:#66d9ef">print</span>(s<span style="color:#f92672">.</span>size())
</code></pre></div><p>3.队列：FIFO结构，先进先出</p>
<p>队列一般用于解决需要优先队列的问题或者进行广度优先搜索的问题，也很简单。</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/queue.png" alt="image"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Completed implementation of a queue ADT</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Queue</span>:
   <span style="color:#66d9ef">def</span> __init__(self):
      self<span style="color:#f92672">.</span>items <span style="color:#f92672">=</span> []
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">is_empty</span>(self):
      <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>items <span style="color:#f92672">==</span> []
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">enqueue</span>(self, item):
      self<span style="color:#f92672">.</span>items<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">0</span>,item)
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dequeue</span>(self):
      <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>items<span style="color:#f92672">.</span>pop()
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">size</span>(self):
      <span style="color:#66d9ef">return</span> len(self<span style="color:#f92672">.</span>items)

q <span style="color:#f92672">=</span> Queue()
q<span style="color:#f92672">.</span>enqueue(<span style="color:#e6db74">&#39;hello&#39;</span>)
q<span style="color:#f92672">.</span>enqueue(<span style="color:#e6db74">&#39;dog&#39;</span>)
<span style="color:#66d9ef">print</span>(q<span style="color:#f92672">.</span>items)
q<span style="color:#f92672">.</span>enqueue(<span style="color:#ae81ff">3</span>)
q<span style="color:#f92672">.</span>dequeue()
<span style="color:#66d9ef">print</span>(q<span style="color:#f92672">.</span>items)
</code></pre></div><p>4.双向队列：左右两边都可以插入和删除的队列</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/deque.png" alt="image"></p>
<p>下面的实现是以右端为front，左端为rear</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Completed implementation of a deque ADT</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Deque</span>:
   <span style="color:#66d9ef">def</span> __init__(self):
      self<span style="color:#f92672">.</span>items <span style="color:#f92672">=</span> []
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">is_empty</span>(self):
      <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>items <span style="color:#f92672">==</span> []
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_front</span>(self, item):
       self<span style="color:#f92672">.</span>items<span style="color:#f92672">.</span>append(item)
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_rear</span>(self, item):
      self<span style="color:#f92672">.</span>items<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">0</span>,item)
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">remove_front</span>(self):
      <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>items<span style="color:#f92672">.</span>pop()
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">remove_rear</span>(self):
      <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>items<span style="color:#f92672">.</span>pop(<span style="color:#ae81ff">0</span>)
   <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">size</span>(self):
      <span style="color:#66d9ef">return</span> len(self<span style="color:#f92672">.</span>items)

dq<span style="color:#f92672">=</span>Deque();
dq<span style="color:#f92672">.</span>add_front(<span style="color:#e6db74">&#39;dog&#39;</span>);
dq<span style="color:#f92672">.</span>add_rear(<span style="color:#e6db74">&#39;cat&#39;</span>);
<span style="color:#66d9ef">print</span>(dq<span style="color:#f92672">.</span>items)
dq<span style="color:#f92672">.</span>remove_front();
dq<span style="color:#f92672">.</span>add_front(<span style="color:#e6db74">&#39;pig&#39;</span>);
<span style="color:#66d9ef">print</span>(dq<span style="color:#f92672">.</span>items)
</code></pre></div><p>5.二叉树：一个节点最多有两个孩子节点的树。如果是从0索引开始存储，那么对应于节点p的孩子节点是2p+1和2p+2两个节点，相反，节点p的父亲节点是(p-1)/2位置上的点</p>
<p>二叉树的应用很多，比如对算术表达式建立一颗二叉树可以清楚看出表达式是如何计算的(详情请见参考内容1)，二叉树的变种可以得到其他的有一定特性的数据结构，例如后面的二叉堆。二叉树的三种遍历方法(前序，中序，后序)同样有很多的应用，比较简单，略过。</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/bt2.png" alt="image"></p>
<p>第一种，直接使用list来实现二叉树，可读性差</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">binary_tree</span>(r):
    <span style="color:#66d9ef">return</span> [r, [], []]
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert_left</span>(root, new_branch):
    t <span style="color:#f92672">=</span> root<span style="color:#f92672">.</span>pop(<span style="color:#ae81ff">1</span>)
    <span style="color:#66d9ef">if</span> len(t) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
        <span style="color:#75715e">#new_branch becomes the left node of root, and original left</span>
        <span style="color:#75715e">#node t becomes left node of new_branch, right node is none</span>
        root<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">1</span>, [new_branch, t, []])
    <span style="color:#66d9ef">else</span>:
        root<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">1</span>, [new_branch, [], []])
    <span style="color:#66d9ef">return</span> root
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert_right</span>(root, new_branch):
    t <span style="color:#f92672">=</span> root<span style="color:#f92672">.</span>pop(<span style="color:#ae81ff">2</span>)
    <span style="color:#66d9ef">if</span> len(t) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
        root<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">2</span>, [new_branch, [], t])
    <span style="color:#66d9ef">else</span>:
        root<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">2</span>, [new_branch, [], []])
    <span style="color:#66d9ef">return</span> root
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_root_val</span>(root):
    <span style="color:#66d9ef">return</span> root[<span style="color:#ae81ff">0</span>]
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">set_root_val</span>(root, new_val):
    root[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> new_val
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_left_child</span>(root):
    <span style="color:#66d9ef">return</span> root[<span style="color:#ae81ff">1</span>]
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_right_child</span>(root):
    <span style="color:#66d9ef">return</span> root[<span style="color:#ae81ff">2</span>]

r <span style="color:#f92672">=</span> binary_tree(<span style="color:#ae81ff">3</span>)
insert_left(r, <span style="color:#ae81ff">4</span>)
insert_left(r, <span style="color:#ae81ff">5</span>)
insert_right(r, <span style="color:#ae81ff">6</span>)
insert_right(r, <span style="color:#ae81ff">7</span>)
<span style="color:#66d9ef">print</span>(r)
l <span style="color:#f92672">=</span> get_left_child(r)
<span style="color:#66d9ef">print</span>(l)
set_root_val(l, <span style="color:#ae81ff">9</span>)
<span style="color:#66d9ef">print</span>(r)
insert_left(l, <span style="color:#ae81ff">11</span>)
<span style="color:#66d9ef">print</span>(r)
<span style="color:#66d9ef">print</span>(get_right_child(get_right_child(r)))
</code></pre></div><p>第二种，使用类的形式定义二叉树，可读性更好</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/btclass.png" alt="image"></p>
<pre><code>class BinaryTree:
    def __init__(self, root):
        self.key = root
        self.left_child = None
        self.right_child = None
    def insert_left(self, new_node):
        if self.left_child == None:
            self.left_child = BinaryTree(new_node)
        else:
            t = BinaryTree(new_node)
            t.left_child = self.left_child
            self.left_child = t
    def insert_right(self, new_node):
        if self.right_child == None:
            self.right_child = BinaryTree(new_node)
        else:
            t = BinaryTree(new_node)
            t.right_child = self.right_child
            self.right_child = t
    def get_right_child(self):
        return self.right_child
    def get_left_child(self):
        return self.left_child
    def set_root_val(self, obj):
        self.key = obj
    def get_root_val(self):
        return self.key

r = BinaryTree('a')
print(r.get_root_val())
print(r.get_left_child())
r.insert_left('b')
print(r.get_left_child())
print(r.get_left_child().get_root_val())
r.insert_right('c')
print(r.get_right_child())
print(r.get_right_child().get_root_val())
r.get_right_child().set_root_val('hello')
print(r.get_right_child().get_root_val())
</code></pre><p>6.二叉堆：根据堆的性质又可以分为最小堆和最大堆，是一种非常好的优先队列。在最小堆中孩子节点一定大于等于其父亲节点，最大堆反之。二叉堆实际上是一棵完全二叉树，并且满足堆的性质。对于插入和查找操作的时间复杂度度都是$O(logn)$。</p>
<p>它的插入操作图示：</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/heapinsert.png" alt="image"></p>
<p>去除根节点的操作图示：</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/heapdel.png" alt="image"></p>
<p>注意，下面的代码实现中默认在初始的堆列表中插入了一个元素0，这样做可以保证堆的真实有效的元素个数和current_size值对应，而且最后一个元素的索引就对应了current_size。</p>
<p>此外，从list中建堆的过程需要从最后一个非叶子节点开始到第一个非叶子节点(根节点)进行，<a href="http://www.cnblogs.com/Anker/archive/2013/01/23/2873422.html">这篇文章</a>详细地解释了这个问题。建堆的过程如下：</p>
<p>[下图摘自原博客，版权归原作者，谢谢]</p>
<p><img src="https://hujiaweibujidao.github.io/images/algos/heapbuild.png" alt="image"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BinHeap</span>:
    <span style="color:#66d9ef">def</span> __init__(self):
        self<span style="color:#f92672">.</span>heap_list <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]
        self<span style="color:#f92672">.</span>current_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">perc_up</span>(self, i):
        <span style="color:#66d9ef">while</span> i <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>: <span style="color:#75715e"># &gt;0 means this node is still available</span>
            <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>heap_list[i] <span style="color:#f92672">&lt;</span> self<span style="color:#f92672">.</span>heap_list[i <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>]:
                tmp <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>heap_list[i <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>]
                self<span style="color:#f92672">.</span>heap_list[i <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>heap_list[i]
                self<span style="color:#f92672">.</span>heap_list[i] <span style="color:#f92672">=</span> tmp
            i <span style="color:#f92672">=</span> i <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>(self, k):
        self<span style="color:#f92672">.</span>heap_list<span style="color:#f92672">.</span>append(k)
        self<span style="color:#f92672">.</span>current_size <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>current_size <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
        self<span style="color:#f92672">.</span>perc_up(self<span style="color:#f92672">.</span>current_size)
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">perc_down</span>(self, i):
        <span style="color:#66d9ef">while</span> (i <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">&lt;=</span> self<span style="color:#f92672">.</span>current_size:
            mc <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>min_child(i)
            <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>heap_list[i] <span style="color:#f92672">&gt;</span> self<span style="color:#f92672">.</span>heap_list[mc]:
                tmp <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>heap_list[i]
                self<span style="color:#f92672">.</span>heap_list[i] <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>heap_list[mc]
                self<span style="color:#f92672">.</span>heap_list[mc] <span style="color:#f92672">=</span> tmp
            i <span style="color:#f92672">=</span> mc
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">min_child</span>(self, i):
        <span style="color:#66d9ef">if</span> i <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&gt;</span> self<span style="color:#f92672">.</span>current_size:
            <span style="color:#66d9ef">return</span> i <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>
        <span style="color:#66d9ef">else</span>:
            <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>heap_list[i <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>] <span style="color:#f92672">&lt;</span> self<span style="color:#f92672">.</span>heap_list[i <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]:
                <span style="color:#66d9ef">return</span> i <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>
            <span style="color:#66d9ef">else</span>:
                <span style="color:#66d9ef">return</span> i <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">del_min</span>(self):
        ret_val <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>heap_list[<span style="color:#ae81ff">1</span>]
        self<span style="color:#f92672">.</span>heap_list[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>heap_list[self<span style="color:#f92672">.</span>current_size]
        self<span style="color:#f92672">.</span>current_size <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>current_size <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
        self<span style="color:#f92672">.</span>heap_list<span style="color:#f92672">.</span>pop()
        self<span style="color:#f92672">.</span>perc_down(<span style="color:#ae81ff">1</span>)
        <span style="color:#66d9ef">return</span> ret_val

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">build_heap</span>(self, a_list):
        i <span style="color:#f92672">=</span> len(a_list) <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>
        self<span style="color:#f92672">.</span>current_size <span style="color:#f92672">=</span> len(a_list)
        self<span style="color:#f92672">.</span>heap_list <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> a_list[:] <span style="color:#75715e">#append original list</span>
        <span style="color:#66d9ef">while</span> (i <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>):
            <span style="color:#75715e">#build the heap we only need to deal the first part!</span>
            self<span style="color:#f92672">.</span>perc_down(i)
            i<span style="color:#f92672">=</span>i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>

a_list<span style="color:#f92672">=</span>[<span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
bh<span style="color:#f92672">=</span>BinHeap();
bh<span style="color:#f92672">.</span>build_heap(a_list);
<span style="color:#66d9ef">print</span>(bh<span style="color:#f92672">.</span>heap_list)
<span style="color:#66d9ef">print</span>(bh<span style="color:#f92672">.</span>current_size)
bh<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">10</span>)
bh<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">7</span>)
<span style="color:#66d9ef">print</span>(bh<span style="color:#f92672">.</span>heap_list)
bh<span style="color:#f92672">.</span>del_min();
<span style="color:#66d9ef">print</span>(bh<span style="color:#f92672">.</span>heap_list)
<span style="color:#66d9ef">print</span>(bh<span style="color:#f92672">.</span>current_size)
</code></pre></div><p>关于二叉查找树等内容请见<a href="https://hujiaweibujidao.github.io/blog/2014/05/09/python-data-structures---c4-trees/">树的总结</a>。</p>
    </section>

    <footer class="post-footer">
      
        <figure class="author-image">
            <a class="img" href="https://hujiaweibujidao.github.io/" style="background-image: url(https://hujiaweibujidao.github.io/images/logo.gif)"><span class="hidden">hujiawei's Picture</span></a>
        </figure>
      

      





<section class="author" style="width:100%;">
  <div class="author-meta" style="width:100%;text-align:center;">
    <span class="author-location icon-user"> Hujiawei is a mobile developer</span>
    <span class="author-location icon-location"> Guangdong, China</span>
    <span class="author-link icon-link"><a href="https://hujiaweibujidao.github.io/"> https://hujiaweibujidao.github.io/</a></span>
    

    
  </div>
  <br/>
</section>


      
        <aside class="read-next">
  
      <span class="readmore-prev readmore-meta">PREV: <a href="https://hujiaweibujidao.github.io/blog/2014/05/09/python-data-structures-c4-trees/"><h4>Python Data Structures - C4 Trees</h4></a></span>
      
  

  
      <span class="readmore-next readmore-meta">NEXT: <a href="https://hujiaweibujidao.github.io/blog/2014/05/07/python-data-structures-c2-sort/"><h4>Python Data Structures - C2 Sort</h4></a></span>
      
  
</aside>
<br/>

      
      
      
    </footer>
</article>

</main>

    <footer class="site-footer clearfix">
        <a id="gotop" class="icon-arrow-up" href="#" title="back to top"></a>

        <section class="copyright"><a href="">Hujiawei Bujidao. </a> All rights reserved &copy; 2013 - 2020</section>
        
        <section class="poweredby">Proudly generated by <a href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme &nbsp;
            
            <script type="text/javascript">
                var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
                document.write(unescape("%3Cspan id='cnzz_stat_icon_1000165127'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s22.cnzz.com/z_stat.php%3Fid%3D1000165127%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
            </script>
        </section>
        
    </footer>
  </div> 
    <script type="text/javascript" src="https://hujiaweibujidao.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="https://hujiaweibujidao.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://hujiaweibujidao.github.io/js/index.js"></script>

    
    
    
    

    
</body>
</html>

